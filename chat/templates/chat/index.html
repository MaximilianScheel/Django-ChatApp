<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css" />
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<style>
  .page-content {
    padding: 50px 50px;
    margin: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  
  .color-grey {
    color: #ccc;
  }
  
  .flex {
    display: flex;
    flex-direction: column;
    margin-bottom: 1rem;
  }
</style>

<!-- Always shows a header, even in smaller screens. -->
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <!-- Title -->
      <span class="mdl-layout-title">
        {% if request.user.is_authenticated %}
          Welcome, {{ request.user.first_name }}
        {% else %}
          Welcome, Please log in
        {% endif %}
      </span>
    </div>
  </header>
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">Chat</span>
  </div>
  <main class="mdl-layout__content">
    <div class="page-content">
      {% if request.user.is_authenticated %}
        {% for message in messages %}
          <div class="flex">
            <p class="color-grey">{{ message.created_at }}</p>
            <div class="flex">{{ message.author.first_name }}: {{ message.text }}</div>
          </div>
        {% endfor %}
        <!-- Accent-colored raised button with ripple -->
        <!-- Simple Textfield -->
        <form action="/chat/" method="post">
          {% csrf_token %}
          <div class="mdl-textfield mdl-js-textfield">
            <input class="mdl-textfield__input" name="textmessage" type="text" id="sample1" />
            <label class="mdl-textfield__label" for="sample1">Text...</label>
          </div>
          <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">Send</button>
        </form>
      {% else %}
        <p>You are not logged in</p><br />
        Please click <a href="/login/">here</a>
      {% endif %}
    </div>
  </main>
</div>
